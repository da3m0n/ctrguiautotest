var wdjs = require('./index.js'),
    clientA = wdjs.remote({
        desiredCapabilities: {
            instance: 'A',
            browserName: 'phantomjs',
            chromeOptions: {
                args: ['--window-size=30,1000','--window-position=550,550']
            }
        }
    }),
    clientB = wdjs.remote({
        desiredCapabilities: {
            instance: 'B',
            browserName: 'phantomjs',
            chromeOptions: {
                args: ['--window-size=30,1000','--window-position=550,550']
            }
        }
    });


var testA = 'bl√∂de sau!!'

// clientA.on('test',function() {
//     console.log(testA);
// });

// clientB.on('test', function() {
//     console.log(testA);
// });



clientA
    .init()
    .url('http://google.de')
    .getTitle(function(err,res) {
        // console.log(err,res);
    })
    .emit('test')
    .once('test',function() {
        console.log(testA);
    })
    .call(function() {
        testA = 'du bist der beste!';
    })
    .emit('test')
    .url('http://github.de')
    .getTitle(function(err,res) {
        // console.log(err,res);
    })
    .emit('test');


// clientB
//     .init()
//     .call(function(){
//         // console.log('bbbb');
//     })
//     .url('http://google.de')
//     .getTitle(function(err,res) {
//         // console.log(err,res);
//     })
//     .emit('test')
//     .url('http://github.de')
//     .getTitle(function(err,res) {
//         // console.log(err,res);
//     })
//     // .emit('test')
//     .end(function() {
//         // console.log('ende B');
//     });

clientA.end(function() {
    // console.log('ende A');
});